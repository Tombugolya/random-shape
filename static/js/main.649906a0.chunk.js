(this["webpackJsonprandom-shape"]=this["webpackJsonprandom-shape"]||[]).push([[0],{27:function(e,t,n){},29:function(e,t,n){},40:function(e,t,n){"use strict";n.r(t);n(27);var i=n(3),r=(n(29),n(0)),s=n(1),o=n(2),a=n(22),c=function(){function e(t,n){Object(r.a)(this,e),this.container=void 0,this._color=void 0,this._renderer=void 0,this._camera=void 0,this._scene=void 0,this._controls=void 0,this._width=void 0,this._height=void 0,this.container=t,this._width=window.innerWidth,this._height=window.innerHeight,this._color=new o.f(n),this._renderer=this.initRenderer(),this._camera=this.initCamera(),this._scene=this.initScene(),this._controls=this.initControls()}return Object(s.a)(e,[{key:"camera",get:function(){return this._camera}},{key:"scene",get:function(){return this._scene}},{key:"handleResize",value:function(e,t){this._width=e,this._height=t,this._renderer.setSize(e,t),this._camera.aspect=e/t,this._camera.updateProjectionMatrix(),this.render()}},{key:"render",value:function(){this._renderer.render(this._scene,this._camera)}},{key:"initRenderer",value:function(){var e=new o.C({antialias:!0});return e.setPixelRatio(window.devicePixelRatio),e.setSize(window.innerWidth,window.innerHeight),this.container.append(e.domElement),e}},{key:"initCamera",value:function(){var e=new o.p(45,this._width/this._height,1,1e3);return e.position.set(0,0,500),e}},{key:"initScene",value:function(){var e=new o.t;return e.background=this._color,e}},{key:"initControls",value:function(){var e=new a.a(this._camera,this._renderer.domElement);return e.minDistance=100,e.maxDistance=500,e}}]),e}(),h=n(12),u=function(){function e(){Object(r.a)(this,e)}return Object(s.a)(e,null,[{key:"chunk",value:function(e,t){return e.reduce((function(e,n,i){return i%t===0?[].concat(Object(h.a)(e),[[n]]):[].concat(Object(h.a)(e.slice(0,-1)),[[].concat(Object(h.a)(e.slice(-1)[0]),[n])])}),[])}}]),e}(),d=function(){function e(){Object(r.a)(this,e)}return Object(s.a)(e,null,[{key:"generateRandomHexadecimal",value:function(){return"#"+Math.floor(16777215*Math.random()).toString(16)}}]),e}(),l=n(26),m=n(23),v=function(){function e(t,n,i,s){var a=this;Object(r.a)(this,e),this.numOfPoints=void 0,this.chunkSize=void 0,this.range=void 0,this.scene=void 0,this.color=void 0,this.object=void 0,this.points=[],this.chunkPoints=[],this.onKeyDown=function(e){switch(e.key){case"r":case"R":a.generateNewShape();break;case"c":case"C":a.generateNewColor()}},this.scene=t,this.color=new o.f(d.generateRandomHexadecimal()),this.numOfPoints=n||20,this.range=n||50,this.chunkSize=s||o.m.randInt(4,7),this.object=this.generateShape(),window.addEventListener("keydown",this.onKeyDown),this.scene.add(this.object)}return Object(s.a)(e,[{key:"generateShape",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o.m.randFloat(0,1);this.points=this.generatePoints(),this.chunkPoints=u.chunk(Object(h.a)(this.points),this.chunkSize);var t=new o.o;return t.color=this.color,new o.n(this.generateGeometry(e),t)}},{key:"updateTension",value:function(e){this.object.geometry.dispose(),this.object.geometry=this.generateGeometry(e)}},{key:"generatePoints",value:function(){for(var e=[],t=0;t<this.numOfPoints;t++)e.push(new o.B(o.m.randFloat(-this.range,this.range),o.m.randFloat(-this.range,this.range),o.m.randFloat(-this.range,this.range)));return e}},{key:"generateGeometry",value:function(t){for(var n=[],i=0;i<this.chunkPoints.length;i++)n.push(new l.a(new o.d(this.chunkPoints[i],!0,"catmullrom",t).getPoints(e.divisions)));return m.a.mergeBufferGeometries(n)}},{key:"generateNewShape",value:function(){this.object.geometry.dispose(),this.object.material.dispose(),this.scene.remove(this.object),this.object=this.generateShape(),this.scene.add(this.object)}},{key:"generateNewColor",value:function(){this.color=new o.f(d.generateRandomHexadecimal()),this.object.material.color=this.color}}]),e}();v.divisions=50;var f=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new o.B;Object(r.a)(this,e),this._ambientLight=void 0,this._pointLight=void 0,this._scene=void 0,this._ambientLight=new o.a("#444"),this._pointLight=new o.r("#fff"),this.position=n,this._scene=t,this._scene.add(this._ambientLight,this._pointLight)}return Object(s.a)(e,[{key:"position",set:function(e){this._pointLight.position.copy(e)}}]),e}(),w=n(4);var g,b=n(11);var p=function(){var e=Object(i.useRef)(),t="true"===new URLSearchParams(Object(w.d)().search).get("beating");return Object(i.useEffect)((function(){var n,i=new o.e;g=new c(e.current,"#000"),new f(g.scene,g.camera.position);var r=new v(g.scene);window.shape=r;var s=function e(){n=requestAnimationFrame(e),a(),g.render()},a=function(){t&&r.updateTension(Math.sin(i.getElapsedTime()))},h=function(){g.handleResize(e.current.clientWidth,e.current.clientHeight)};return window.addEventListener("resize",h),n||(n=requestAnimationFrame(s)),function(){cancelAnimationFrame(n),window.removeEventListener("resize",h),window.removeEventListener("resize",h)}}),[t]),Object(b.jsx)("div",{ref:e,id:"container"})},_=n(25),j=n.n(_),k=n(17);function y(){return Object(b.jsx)(k.a,{children:Object(b.jsx)(p,{})})}j.a.render(Object(b.jsx)(y,{}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.649906a0.chunk.js.map